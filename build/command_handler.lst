ARM GAS  /var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"command_handler.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/command_handler/command_handler.c"
  20              		.section	.text.BVAT_Init,"ax",%progbits
  21              		.align	1
  22              		.global	BVAT_Init
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	BVAT_Init:
  28              	.LFB137:
   1:Core/Src/command_handler/command_handler.c **** #include "command_handler.h"
   2:Core/Src/command_handler/command_handler.c **** 
   3:Core/Src/command_handler/command_handler.c **** static u32 command_timer = 0;
   4:Core/Src/command_handler/command_handler.c **** char UART_buffer[64];
   5:Core/Src/command_handler/command_handler.c **** 
   6:Core/Src/command_handler/command_handler.c **** bool i2c_ready = false;
   7:Core/Src/command_handler/command_handler.c **** 
   8:Core/Src/command_handler/command_handler.c **** void BVAT_Init(void) {
  29              		.loc 1 8 22 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33 0000 08B5     		push	{r3, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 3, -8
  37              		.cfi_offset 14, -4
   9:Core/Src/command_handler/command_handler.c ****     AML_Init();                         // Handles all HAL init
  38              		.loc 1 9 5 view .LVU1
  39 0002 FFF7FEFF 		bl	AML_Init
  40              	.LVL0:
  10:Core/Src/command_handler/command_handler.c ****     command_timer = HAL_GetTick();      // Set command timer
  41              		.loc 1 10 5 view .LVU2
  42              		.loc 1 10 21 is_stmt 0 view .LVU3
  43 0006 FFF7FEFF 		bl	HAL_GetTick
  44              	.LVL1:
  45              		.loc 1 10 19 discriminator 1 view .LVU4
  46 000a 034B     		ldr	r3, .L3
  47 000c 1860     		str	r0, [r3]
  11:Core/Src/command_handler/command_handler.c **** 
ARM GAS  /var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s 			page 2


  12:Core/Src/command_handler/command_handler.c ****     HAL_Delay(100);
  48              		.loc 1 12 5 is_stmt 1 view .LVU5
  49 000e 6420     		movs	r0, #100
  50 0010 FFF7FEFF 		bl	HAL_Delay
  51              	.LVL2:
  13:Core/Src/command_handler/command_handler.c **** }
  52              		.loc 1 13 1 is_stmt 0 view .LVU6
  53 0014 08BD     		pop	{r3, pc}
  54              	.L4:
  55 0016 00BF     		.align	2
  56              	.L3:
  57 0018 00000000 		.word	command_timer
  58              		.cfi_endproc
  59              	.LFE137:
  61              		.section	.rodata.log_to_uart.str1.4,"aMS",%progbits,1
  62              		.align	2
  63              	.LC0:
  64 0000 256C752C 		.ascii	"%lu, %d, %d, %d\012\000"
  64      2025642C 
  64      2025642C 
  64      2025640A 
  64      00
  65              		.section	.text.log_to_uart,"ax",%progbits
  66              		.align	1
  67              		.global	log_to_uart
  68              		.syntax unified
  69              		.thumb
  70              		.thumb_func
  72              	log_to_uart:
  73              	.LVL3:
  74              	.LFB138:
  14:Core/Src/command_handler/command_handler.c **** 
  15:Core/Src/command_handler/command_handler.c **** //TODO: SD Card needs to be discussed -> Not available with the current setup
  16:Core/Src/command_handler/command_handler.c **** //* What would be better to log data to SD card or just UART?
  17:Core/Src/command_handler/command_handler.c **** 
  18:Core/Src/command_handler/command_handler.c **** // void log_to_sd(u32 timestamp, u8 x, u8 y, u8 z) {
  19:Core/Src/command_handler/command_handler.c **** //     FIL file;
  20:Core/Src/command_handler/command_handler.c **** //     UINT bytes_written;
  21:Core/Src/command_handler/command_handler.c **** //     char buffer[64];
  22:Core/Src/command_handler/command_handler.c **** 
  23:Core/Src/command_handler/command_handler.c **** //     if (f_open(&file, "data.csv", FA_OPEN_APPEND | FA_WRITE) != FR_OK) {
  24:Core/Src/command_handler/command_handler.c **** //         WriteUART("SD file open failed.\n");
  25:Core/Src/command_handler/command_handler.c **** //         return;
  26:Core/Src/command_handler/command_handler.c **** //     }
  27:Core/Src/command_handler/command_handler.c **** 
  28:Core/Src/command_handler/command_handler.c **** //     snprintf(buffer, sizeof(buffer), "%lu, %d, %d, %d\n", timestamp, x, y, z);
  29:Core/Src/command_handler/command_handler.c **** //     f_write(&file, buffer, strlen(buffer), &bytes_written);
  30:Core/Src/command_handler/command_handler.c **** 
  31:Core/Src/command_handler/command_handler.c **** //     f_close(&file);
  32:Core/Src/command_handler/command_handler.c **** // }
  33:Core/Src/command_handler/command_handler.c **** 
  34:Core/Src/command_handler/command_handler.c **** //! This is temporarily function to log data via UART
  35:Core/Src/command_handler/command_handler.c **** 
  36:Core/Src/command_handler/command_handler.c **** void log_to_uart(u32 timestamp, u8 x, u8 y, u8 z) {
  75              		.loc 1 36 51 is_stmt 1 view -0
  76              		.cfi_startproc
  77              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s 			page 3


  78              		@ frame_needed = 0, uses_anonymous_args = 0
  79              		.loc 1 36 51 is_stmt 0 view .LVU8
  80 0000 10B5     		push	{r4, lr}
  81              	.LCFI1:
  82              		.cfi_def_cfa_offset 8
  83              		.cfi_offset 4, -8
  84              		.cfi_offset 14, -4
  85 0002 84B0     		sub	sp, sp, #16
  86              	.LCFI2:
  87              		.cfi_def_cfa_offset 24
  37:Core/Src/command_handler/command_handler.c ****     snprintf(UART_buffer, sizeof(UART_buffer), "%lu, %d, %d, %d\n", timestamp, x, y, z);
  88              		.loc 1 37 5 is_stmt 1 view .LVU9
  89 0004 074C     		ldr	r4, .L7
  90 0006 0293     		str	r3, [sp, #8]
  91 0008 0192     		str	r2, [sp, #4]
  92 000a 0091     		str	r1, [sp]
  93 000c 0346     		mov	r3, r0
  94              	.LVL4:
  95              		.loc 1 37 5 is_stmt 0 view .LVU10
  96 000e 064A     		ldr	r2, .L7+4
  97              	.LVL5:
  98              		.loc 1 37 5 view .LVU11
  99 0010 4021     		movs	r1, #64
 100              	.LVL6:
 101              		.loc 1 37 5 view .LVU12
 102 0012 2046     		mov	r0, r4
 103              	.LVL7:
 104              		.loc 1 37 5 view .LVU13
 105 0014 FFF7FEFF 		bl	snprintf
 106              	.LVL8:
  38:Core/Src/command_handler/command_handler.c ****     WriteUART(UART_buffer);
 107              		.loc 1 38 5 is_stmt 1 view .LVU14
 108 0018 2046     		mov	r0, r4
 109 001a FFF7FEFF 		bl	WriteUART
 110              	.LVL9:
  39:Core/Src/command_handler/command_handler.c **** }
 111              		.loc 1 39 1 is_stmt 0 view .LVU15
 112 001e 04B0     		add	sp, sp, #16
 113              	.LCFI3:
 114              		.cfi_def_cfa_offset 8
 115              		@ sp needed
 116 0020 10BD     		pop	{r4, pc}
 117              	.L8:
 118 0022 00BF     		.align	2
 119              	.L7:
 120 0024 00000000 		.word	UART_buffer
 121 0028 00000000 		.word	.LC0
 122              		.cfi_endproc
 123              	.LFE138:
 125              		.section	.rodata.measure_loop.str1.4,"aMS",%progbits,1
 126              		.align	2
 127              	.LC1:
 128 0000 49324320 		.ascii	"I2C not available, skipping measurement.\012\000"
 128      6E6F7420 
 128      61766169 
 128      6C61626C 
 128      652C2073 
ARM GAS  /var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s 			page 4


 129 002a 0000     		.align	2
 130              	.LC2:
 131 002c 583A2025 		.ascii	"X: %d, Y: %d, Z: %d\012\000"
 131      642C2059 
 131      3A202564 
 131      2C205A3A 
 131      2025640A 
 132              		.section	.text.measure_loop,"ax",%progbits
 133              		.align	1
 134              		.global	measure_loop
 135              		.syntax unified
 136              		.thumb
 137              		.thumb_func
 139              	measure_loop:
 140              	.LFB139:
  40:Core/Src/command_handler/command_handler.c **** 
  41:Core/Src/command_handler/command_handler.c **** void measure_loop(void) {
 141              		.loc 1 41 25 is_stmt 1 view -0
 142              		.cfi_startproc
 143              		@ args = 0, pretend = 0, frame = 0
 144              		@ frame_needed = 0, uses_anonymous_args = 0
 145 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 146              	.LCFI4:
 147              		.cfi_def_cfa_offset 20
 148              		.cfi_offset 4, -20
 149              		.cfi_offset 5, -16
 150              		.cfi_offset 6, -12
 151              		.cfi_offset 7, -8
 152              		.cfi_offset 14, -4
 153 0002 83B0     		sub	sp, sp, #12
 154              	.LCFI5:
 155              		.cfi_def_cfa_offset 32
  42:Core/Src/command_handler/command_handler.c ****     if (!i2c_ready) {
 156              		.loc 1 42 5 view .LVU17
 157              		.loc 1 42 9 is_stmt 0 view .LVU18
 158 0004 1A4B     		ldr	r3, .L17
 159 0006 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 160              		.loc 1 42 8 view .LVU19
 161 0008 53B1     		cbz	r3, .L14
  43:Core/Src/command_handler/command_handler.c ****         WriteUART("I2C not available, skipping measurement.\n");
  44:Core/Src/command_handler/command_handler.c ****         return;
  45:Core/Src/command_handler/command_handler.c ****     }
  46:Core/Src/command_handler/command_handler.c **** 
  47:Core/Src/command_handler/command_handler.c ****     if (!acc_enabled) {
 162              		.loc 1 47 5 is_stmt 1 view .LVU20
 163              		.loc 1 47 9 is_stmt 0 view .LVU21
 164 000a 1A4B     		ldr	r3, .L17+4
 165 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 166              		.loc 1 47 8 view .LVU22
 167 000e 5BB1     		cbz	r3, .L15
 168              	.L12:
  48:Core/Src/command_handler/command_handler.c ****         I2C_ACC_Enable();
  49:Core/Src/command_handler/command_handler.c ****         acc_enabled = true;
  50:Core/Src/command_handler/command_handler.c ****     }
  51:Core/Src/command_handler/command_handler.c **** 
  52:Core/Src/command_handler/command_handler.c ****     if (timer_handler(1000, &command_timer)) {
 169              		.loc 1 52 5 is_stmt 1 view .LVU23
ARM GAS  /var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s 			page 5


 170              		.loc 1 52 9 is_stmt 0 view .LVU24
 171 0010 1949     		ldr	r1, .L17+8
 172 0012 4FF47A70 		mov	r0, #1000
 173 0016 FFF7FEFF 		bl	timer_handler
 174              	.LVL10:
 175              		.loc 1 52 8 discriminator 1 view .LVU25
 176 001a 58B9     		cbnz	r0, .L16
 177              	.L9:
  53:Core/Src/command_handler/command_handler.c ****         u8 x = readACC(0x28);
  54:Core/Src/command_handler/command_handler.c ****         u8 y = readACC(0x29);
  55:Core/Src/command_handler/command_handler.c ****         u8 z = readACC(0x2A);
  56:Core/Src/command_handler/command_handler.c **** 
  57:Core/Src/command_handler/command_handler.c ****         u32 timestamp = HAL_GetTick();
  58:Core/Src/command_handler/command_handler.c **** 
  59:Core/Src/command_handler/command_handler.c ****         // UART Output
  60:Core/Src/command_handler/command_handler.c ****         snprintf(UART_buffer, sizeof(UART_buffer), "X: %d, Y: %d, Z: %d\n", x, y, z);
  61:Core/Src/command_handler/command_handler.c **** 
  62:Core/Src/command_handler/command_handler.c ****         //* To write to UART -> deactivated to prevent double logging
  63:Core/Src/command_handler/command_handler.c ****         // WriteUART(UART_buffer);
  64:Core/Src/command_handler/command_handler.c **** 
  65:Core/Src/command_handler/command_handler.c ****         // // SD Logging
  66:Core/Src/command_handler/command_handler.c ****         // log_to_sd(timestamp, x, y, z);
  67:Core/Src/command_handler/command_handler.c ****         log_to_uart(timestamp, x, y, z);
  68:Core/Src/command_handler/command_handler.c ****     }
  69:Core/Src/command_handler/command_handler.c **** }
 178              		.loc 1 69 1 view .LVU26
 179 001c 03B0     		add	sp, sp, #12
 180              	.LCFI6:
 181              		.cfi_remember_state
 182              		.cfi_def_cfa_offset 20
 183              		@ sp needed
 184 001e F0BD     		pop	{r4, r5, r6, r7, pc}
 185              	.L14:
 186              	.LCFI7:
 187              		.cfi_restore_state
  43:Core/Src/command_handler/command_handler.c ****         return;
 188              		.loc 1 43 9 is_stmt 1 view .LVU27
 189 0020 1648     		ldr	r0, .L17+12
 190 0022 FFF7FEFF 		bl	WriteUART
 191              	.LVL11:
  44:Core/Src/command_handler/command_handler.c ****     }
 192              		.loc 1 44 9 view .LVU28
 193 0026 F9E7     		b	.L9
 194              	.L15:
  48:Core/Src/command_handler/command_handler.c ****         acc_enabled = true;
 195              		.loc 1 48 9 view .LVU29
 196 0028 FFF7FEFF 		bl	I2C_ACC_Enable
 197              	.LVL12:
  49:Core/Src/command_handler/command_handler.c ****     }
 198              		.loc 1 49 9 view .LVU30
  49:Core/Src/command_handler/command_handler.c ****     }
 199              		.loc 1 49 21 is_stmt 0 view .LVU31
 200 002c 114B     		ldr	r3, .L17+4
 201 002e 0122     		movs	r2, #1
 202 0030 1A70     		strb	r2, [r3]
 203 0032 EDE7     		b	.L12
 204              	.L16:
ARM GAS  /var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s 			page 6


 205              	.LBB2:
  53:Core/Src/command_handler/command_handler.c ****         u8 y = readACC(0x29);
 206              		.loc 1 53 9 is_stmt 1 view .LVU32
  53:Core/Src/command_handler/command_handler.c ****         u8 y = readACC(0x29);
 207              		.loc 1 53 16 is_stmt 0 view .LVU33
 208 0034 2820     		movs	r0, #40
 209 0036 FFF7FEFF 		bl	readACC
 210              	.LVL13:
 211 003a 0446     		mov	r4, r0
 212              	.LVL14:
  54:Core/Src/command_handler/command_handler.c ****         u8 z = readACC(0x2A);
 213              		.loc 1 54 9 is_stmt 1 view .LVU34
  54:Core/Src/command_handler/command_handler.c ****         u8 z = readACC(0x2A);
 214              		.loc 1 54 16 is_stmt 0 view .LVU35
 215 003c 2920     		movs	r0, #41
 216 003e FFF7FEFF 		bl	readACC
 217              	.LVL15:
 218 0042 0546     		mov	r5, r0
 219              	.LVL16:
  55:Core/Src/command_handler/command_handler.c **** 
 220              		.loc 1 55 9 is_stmt 1 view .LVU36
  55:Core/Src/command_handler/command_handler.c **** 
 221              		.loc 1 55 16 is_stmt 0 view .LVU37
 222 0044 2A20     		movs	r0, #42
 223 0046 FFF7FEFF 		bl	readACC
 224              	.LVL17:
 225 004a 0646     		mov	r6, r0
 226              	.LVL18:
  57:Core/Src/command_handler/command_handler.c **** 
 227              		.loc 1 57 9 is_stmt 1 view .LVU38
  57:Core/Src/command_handler/command_handler.c **** 
 228              		.loc 1 57 25 is_stmt 0 view .LVU39
 229 004c FFF7FEFF 		bl	HAL_GetTick
 230              	.LVL19:
 231 0050 0746     		mov	r7, r0
 232              	.LVL20:
  60:Core/Src/command_handler/command_handler.c **** 
 233              		.loc 1 60 9 is_stmt 1 view .LVU40
 234 0052 0196     		str	r6, [sp, #4]
 235 0054 0095     		str	r5, [sp]
 236 0056 2346     		mov	r3, r4
 237 0058 094A     		ldr	r2, .L17+16
 238 005a 4021     		movs	r1, #64
 239 005c 0948     		ldr	r0, .L17+20
 240              	.LVL21:
  60:Core/Src/command_handler/command_handler.c **** 
 241              		.loc 1 60 9 is_stmt 0 view .LVU41
 242 005e FFF7FEFF 		bl	snprintf
 243              	.LVL22:
  67:Core/Src/command_handler/command_handler.c ****     }
 244              		.loc 1 67 9 is_stmt 1 view .LVU42
 245 0062 3346     		mov	r3, r6
 246 0064 2A46     		mov	r2, r5
 247 0066 2146     		mov	r1, r4
 248 0068 3846     		mov	r0, r7
 249 006a FFF7FEFF 		bl	log_to_uart
 250              	.LVL23:
ARM GAS  /var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s 			page 7


 251 006e D5E7     		b	.L9
 252              	.L18:
 253              		.align	2
 254              	.L17:
 255 0070 00000000 		.word	i2c_ready
 256 0074 00000000 		.word	acc_enabled
 257 0078 00000000 		.word	command_timer
 258 007c 00000000 		.word	.LC1
 259 0080 2C000000 		.word	.LC2
 260 0084 00000000 		.word	UART_buffer
 261              	.LBE2:
 262              		.cfi_endproc
 263              	.LFE139:
 265              		.global	i2c_ready
 266              		.section	.bss.i2c_ready,"aw",%nobits
 269              	i2c_ready:
 270 0000 00       		.space	1
 271              		.global	UART_buffer
 272              		.section	.bss.UART_buffer,"aw",%nobits
 273              		.align	2
 276              	UART_buffer:
 277 0000 00000000 		.space	64
 277      00000000 
 277      00000000 
 277      00000000 
 277      00000000 
 278              		.section	.bss.command_timer,"aw",%nobits
 279              		.align	2
 282              	command_timer:
 283 0000 00000000 		.space	4
 284              		.text
 285              	.Letext0:
 286              		.file 2 "/Applications/ArmGNUToolchain/13.3.rel1/arm-none-eabi/arm-none-eabi/include/machine/_defa
 287              		.file 3 "/Applications/ArmGNUToolchain/13.3.rel1/arm-none-eabi/arm-none-eabi/include/sys/_stdint.h
 288              		.file 4 "/Applications/ArmGNUToolchain/13.3.rel1/arm-none-eabi/lib/gcc/arm-none-eabi/13.3.1/includ
 289              		.file 5 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 290              		.file 6 "Core/Src/library/aml_hal.h"
 291              		.file 7 "Core/Src/i2c_handler/i2c_handler.h"
 292              		.file 8 "Core/Src/timer/timer.h"
 293              		.file 9 "Core/Src/uart_handler/uart_handler.h"
 294              		.file 10 "/Applications/ArmGNUToolchain/13.3.rel1/arm-none-eabi/arm-none-eabi/include/stdio.h"
 295              		.file 11 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
ARM GAS  /var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s 			page 8


DEFINED SYMBOLS
                            *ABS*:00000000 command_handler.c
/var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s:21     .text.BVAT_Init:00000000 $t
/var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s:27     .text.BVAT_Init:00000000 BVAT_Init
/var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s:57     .text.BVAT_Init:00000018 $d
/var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s:282    .bss.command_timer:00000000 command_timer
/var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s:62     .rodata.log_to_uart.str1.4:00000000 $d
/var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s:66     .text.log_to_uart:00000000 $t
/var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s:72     .text.log_to_uart:00000000 log_to_uart
/var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s:120    .text.log_to_uart:00000024 $d
/var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s:276    .bss.UART_buffer:00000000 UART_buffer
/var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s:126    .rodata.measure_loop.str1.4:00000000 $d
/var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s:133    .text.measure_loop:00000000 $t
/var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s:139    .text.measure_loop:00000000 measure_loop
/var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s:255    .text.measure_loop:00000070 $d
/var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s:269    .bss.i2c_ready:00000000 i2c_ready
/var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s:270    .bss.i2c_ready:00000000 $d
/var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s:273    .bss.UART_buffer:00000000 $d
/var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//ccwldoxQ.s:279    .bss.command_timer:00000000 $d

UNDEFINED SYMBOLS
AML_Init
HAL_GetTick
HAL_Delay
snprintf
WriteUART
timer_handler
I2C_ACC_Enable
readACC
acc_enabled
