ARM GAS  /var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//cctT7OzQ.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"main.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/main.c"
  20              		.section	.rodata.main.str1.4,"aMS",%progbits,1
  21              		.align	2
  22              	.LC0:
  23 0000 2D2D2D2D 		.ascii	"---------------------------------------\015\012\000"
  23      2D2D2D2D 
  23      2D2D2D2D 
  23      2D2D2D2D 
  23      2D2D2D2D 
  24 002a 0000     		.align	2
  25              	.LC1:
  26 002c 53797374 		.ascii	"System Boot: Hello from STM32 AML-BVAT!\015\012\000"
  26      656D2042 
  26      6F6F743A 
  26      2048656C 
  26      6C6F2066 
  27 0056 0000     		.align	2
  28              	.LC2:
  29 0058 53797374 		.ascii	"System ready. Press USER button to start/stop loggi"
  29      656D2072 
  29      65616479 
  29      2E205072 
  29      65737320 
  30 008b 6E672E0D 		.ascii	"ng.\015\012\000"
  30      0A00
  31 0091 000000   		.align	2
  32              	.LC3:
  33 0094 53797374 		.ascii	"System setup complete, but I2C SENSOR ISSUE DETECTE"
  33      656D2073 
  33      65747570 
  33      20636F6D 
  33      706C6574 
  34 00c7 442E0D0A 		.ascii	"D.\015\012\000"
  34      00
  35              		.section	.text.main,"ax",%progbits
  36              		.align	1
  37              		.global	main
  38              		.syntax unified
  39              		.thumb
ARM GAS  /var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//cctT7OzQ.s 			page 2


  40              		.thumb_func
  42              	main:
  43              	.LFB137:
   1:Core/Src/main.c **** /**
   2:Core/Src/main.c ****   ******************************************************************************
   3:Core/Src/main.c ****   * @file           : main.c
   4:Core/Src/main.c ****   * @brief          : Main program body for AML BVAT Project.
   5:Core/Src/main.c ****   ******************************************************************************
   6:Core/Src/main.c ****   */
   7:Core/Src/main.c **** 
   8:Core/Src/main.c **** /* Includes ------------------------------------------------------------------*/
   9:Core/Src/main.c **** #include "main.h"
  10:Core/Src/main.c **** #include "aml_hal.h"
  11:Core/Src/main.c **** #include "gpio_handler.h"
  12:Core/Src/main.c **** #include "uart_handler.h"
  13:Core/Src/main.c **** #include "command_handler.h"
  14:Core/Src/main.c **** #include "i2c_handler.h"
  15:Core/Src/main.c **** 
  16:Core/Src/main.c **** /* Private variables ---------------------------------------------------------*/
  17:Core/Src/main.c **** // Global state variables like g_builtinLed, g_is_logging_active, etc. are
  18:Core/Src/main.c **** // defined in their respective handler files and declared 'extern' in their headers.
  19:Core/Src/main.c **** 
  20:Core/Src/main.c **** /**
  21:Core/Src/main.c ****   * @brief  The application entry point.
  22:Core/Src/main.c ****   * @retval int
  23:Core/Src/main.c ****   */
  24:Core/Src/main.c **** int main(void)
  25:Core/Src/main.c **** {
  44              		.loc 1 25 1 view -0
  45              		.cfi_startproc
  46              		@ args = 0, pretend = 0, frame = 0
  47              		@ frame_needed = 0, uses_anonymous_args = 0
  48 0000 10B5     		push	{r4, lr}
  49              	.LCFI0:
  50              		.cfi_def_cfa_offset 8
  51              		.cfi_offset 4, -8
  52              		.cfi_offset 14, -4
  26:Core/Src/main.c ****   bool system_ready_for_logging = false;
  53              		.loc 1 26 3 view .LVU1
  54              	.LVL0:
  27:Core/Src/main.c **** 
  28:Core/Src/main.c ****   // --- 1. Core System & Peripheral Initialization ---
  29:Core/Src/main.c ****   AML_Init();             // Initializes HAL, Clocks, GPIO, UART, I2C, Timers.
  55              		.loc 1 29 3 view .LVU2
  56 0002 FFF7FEFF 		bl	AML_Init
  57              	.LVL1:
  30:Core/Src/main.c ****   BuiltinLED_Init();        // Initializes the software struct for the built-in LED.
  58              		.loc 1 30 3 view .LVU3
  59 0006 FFF7FEFF 		bl	BuiltinLED_Init
  60              	.LVL2:
  31:Core/Src/main.c ****   BuiltinPushButton_Init(); // Initializes the software struct and hardware for the user button int
  61              		.loc 1 31 3 view .LVU4
  62 000a FFF7FEFF 		bl	BuiltinPushButton_Init
  63              	.LVL3:
  32:Core/Src/main.c ****   CommandHandler_Init();    // Initializes timers or states needed by the command handler.
  64              		.loc 1 32 3 view .LVU5
  65 000e FFF7FEFF 		bl	CommandHandler_Init
ARM GAS  /var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//cctT7OzQ.s 			page 3


  66              	.LVL4:
  33:Core/Src/main.c **** 
  34:Core/Src/main.c ****   // --- 2. Startup Messaging and Diagnostics ---
  35:Core/Src/main.c ****   HAL_Delay(100); // Give peripherals a moment to stabilize after power-on.
  67              		.loc 1 35 3 view .LVU6
  68 0012 6420     		movs	r0, #100
  69 0014 FFF7FEFF 		bl	HAL_Delay
  70              	.LVL5:
  36:Core/Src/main.c ****   WriteUART_Blocking("---------------------------------------\r\n");
  71              		.loc 1 36 3 view .LVU7
  72 0018 184C     		ldr	r4, .L9
  73 001a 2046     		mov	r0, r4
  74 001c FFF7FEFF 		bl	WriteUART_Blocking
  75              	.LVL6:
  37:Core/Src/main.c ****   WriteUART_Blocking("System Boot: Hello from STM32 AML-BVAT!\r\n");
  76              		.loc 1 37 3 view .LVU8
  77 0020 1748     		ldr	r0, .L9+4
  78 0022 FFF7FEFF 		bl	WriteUART_Blocking
  79              	.LVL7:
  38:Core/Src/main.c ****   WriteUART_Blocking("---------------------------------------\r\n");
  80              		.loc 1 38 3 view .LVU9
  81 0026 2046     		mov	r0, r4
  82 0028 FFF7FEFF 		bl	WriteUART_Blocking
  83              	.LVL8:
  39:Core/Src/main.c **** 
  40:Core/Src/main.c ****   // --- 3. I2C System Initialization and Sensor Verification ---
  41:Core/Src/main.c ****   if (BVAT_I2C_Init()) { // This function initializes the I2C bus, pings the sensor, and enables it
  84              		.loc 1 41 3 view .LVU10
  85              		.loc 1 41 7 is_stmt 0 view .LVU11
  86 002c FFF7FEFF 		bl	BVAT_I2C_Init
  87              	.LVL9:
  88              		.loc 1 41 6 discriminator 1 view .LVU12
  89 0030 0446     		mov	r4, r0
  90 0032 D0B9     		cbnz	r0, .L8
  91              	.L2:
  92              	.LVL10:
  42:Core/Src/main.c ****                          // It prints its own detailed status messages.
  43:Core/Src/main.c **** 
  44:Core/Src/main.c ****       // Now, perform a detailed verification of the sensor's configuration.
  45:Core/Src/main.c ****       if (Verify_LIS3DH_Sensor()) { // This new function is in command_handler.c
  46:Core/Src/main.c ****           system_ready_for_logging = true;
  47:Core/Src/main.c ****       }
  48:Core/Src/main.c ****   }
  49:Core/Src/main.c ****   
  50:Core/Src/main.c ****   // --- 4. Final Setup Indication ---
  51:Core/Src/main.c ****   indicate_setup_with_blinks(3, 100); // Visual cue that setup sequence is complete.
  93              		.loc 1 51 3 is_stmt 1 view .LVU13
  94 0034 6421     		movs	r1, #100
  95 0036 0320     		movs	r0, #3
  96 0038 FFF7FEFF 		bl	indicate_setup_with_blinks
  97              	.LVL11:
  52:Core/Src/main.c **** 
  53:Core/Src/main.c ****   if (system_ready_for_logging) {
  98              		.loc 1 53 3 view .LVU14
  99              		.loc 1 53 6 is_stmt 0 view .LVU15
 100 003c CCB1     		cbz	r4, .L3
  54:Core/Src/main.c ****     WriteUART_Blocking("System ready. Press USER button to start/stop logging.\r\n");
ARM GAS  /var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//cctT7OzQ.s 			page 4


 101              		.loc 1 54 5 is_stmt 1 view .LVU16
 102 003e 1148     		ldr	r0, .L9+8
 103 0040 FFF7FEFF 		bl	WriteUART_Blocking
 104              	.LVL12:
 105              	.L4:
  55:Core/Src/main.c ****   } else {
  56:Core/Src/main.c ****     WriteUART_Blocking("System setup complete, but I2C SENSOR ISSUE DETECTED.\r\n");
  57:Core/Src/main.c ****   }
  58:Core/Src/main.c ****   WriteUART_Blocking("---------------------------------------\r\n");
 106              		.loc 1 58 3 view .LVU17
 107 0044 0D48     		ldr	r0, .L9
 108 0046 FFF7FEFF 		bl	WriteUART_Blocking
 109              	.LVL13:
 110              	.L5:
  59:Core/Src/main.c **** 
  60:Core/Src/main.c ****   // --- 5. Main Execution Loop ---
  61:Core/Src/main.c ****   while (1)
 111              		.loc 1 61 3 view .LVU18
  62:Core/Src/main.c ****   {
  63:Core/Src/main.c ****     // The main operational logic is now handled by measure_loop().
  64:Core/Src/main.c ****     // It internally checks if logging is active.
  65:Core/Src/main.c ****     measure_loop();
 112              		.loc 1 65 5 view .LVU19
 113 004a FFF7FEFF 		bl	measure_loop
 114              	.LVL14:
  66:Core/Src/main.c ****     
  67:Core/Src/main.c ****     // If logging is NOT active, perform an idle "heartbeat" blink.
  68:Core/Src/main.c ****     // This shows the system is alive and waiting for a button press.
  69:Core/Src/main.c ****     if (!g_is_logging_active) {
 115              		.loc 1 69 5 view .LVU20
 116              		.loc 1 69 9 is_stmt 0 view .LVU21
 117 004e 0E4B     		ldr	r3, .L9+12
 118 0050 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 119              		.loc 1 69 8 view .LVU22
 120 0052 002B     		cmp	r3, #0
 121 0054 F9D1     		bne	.L5
  70:Core/Src/main.c ****         HAL_GPIO_TogglePin(g_builtinLed.pin.port, g_builtinLed.pin.pin);
 122              		.loc 1 70 9 is_stmt 1 view .LVU23
 123 0056 0D4B     		ldr	r3, .L9+16
 124 0058 9988     		ldrh	r1, [r3, #4]
 125 005a 1868     		ldr	r0, [r3]
 126 005c FFF7FEFF 		bl	HAL_GPIO_TogglePin
 127              	.LVL15:
  71:Core/Src/main.c ****         HAL_Delay(500); // Slow heartbeat blink
 128              		.loc 1 71 9 view .LVU24
 129 0060 4FF4FA70 		mov	r0, #500
 130 0064 FFF7FEFF 		bl	HAL_Delay
 131              	.LVL16:
 132 0068 EFE7     		b	.L5
 133              	.LVL17:
 134              	.L8:
  45:Core/Src/main.c ****           system_ready_for_logging = true;
 135              		.loc 1 45 7 view .LVU25
  45:Core/Src/main.c ****           system_ready_for_logging = true;
 136              		.loc 1 45 11 is_stmt 0 view .LVU26
 137 006a FFF7FEFF 		bl	Verify_LIS3DH_Sensor
 138              	.LVL18:
ARM GAS  /var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//cctT7OzQ.s 			page 5


 139 006e 0446     		mov	r4, r0
 140 0070 E0E7     		b	.L2
 141              	.LVL19:
 142              	.L3:
  56:Core/Src/main.c ****   }
 143              		.loc 1 56 5 is_stmt 1 view .LVU27
 144 0072 0748     		ldr	r0, .L9+20
 145 0074 FFF7FEFF 		bl	WriteUART_Blocking
 146              	.LVL20:
 147 0078 E4E7     		b	.L4
 148              	.L10:
 149 007a 00BF     		.align	2
 150              	.L9:
 151 007c 00000000 		.word	.LC0
 152 0080 2C000000 		.word	.LC1
 153 0084 58000000 		.word	.LC2
 154 0088 00000000 		.word	g_is_logging_active
 155 008c 00000000 		.word	g_builtinLed
 156 0090 94000000 		.word	.LC3
 157              		.cfi_endproc
 158              	.LFE137:
 160              		.text
 161              	.Letext0:
 162              		.file 2 "/Applications/ArmGNUToolchain/13.3.rel1/arm-none-eabi/arm-none-eabi/include/machine/_defa
 163              		.file 3 "/Applications/ArmGNUToolchain/13.3.rel1/arm-none-eabi/arm-none-eabi/include/sys/_stdint.h
 164              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f411xe.h"
 165              		.file 5 "Core/Src/library/aml_hal.h"
 166              		.file 6 "Core/Src/gpio_handler/gpio_handler.h"
 167              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 168              		.file 8 "Core/Src/command_handler/command_handler.h"
 169              		.file 9 "Core/Src/i2c_handler/i2c_handler.h"
 170              		.file 10 "Core/Src/uart_handler/uart_handler.h"
 171              		.file 11 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
ARM GAS  /var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//cctT7OzQ.s 			page 6


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
/var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//cctT7OzQ.s:21     .rodata.main.str1.4:00000000 $d
/var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//cctT7OzQ.s:36     .text.main:00000000 $t
/var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//cctT7OzQ.s:42     .text.main:00000000 main
/var/folders/25/vg8ydb454_z3v37m53jqj5280000gn/T//cctT7OzQ.s:151    .text.main:0000007c $d

UNDEFINED SYMBOLS
AML_Init
BuiltinLED_Init
BuiltinPushButton_Init
CommandHandler_Init
HAL_Delay
WriteUART_Blocking
BVAT_I2C_Init
indicate_setup_with_blinks
measure_loop
HAL_GPIO_TogglePin
Verify_LIS3DH_Sensor
g_is_logging_active
g_builtinLed
